Ext.define('Ext.ux.statusbar.StatusBar',{extend:'Ext.toolbar.Toolbar',alternateClassName:'Ext.ux.StatusBar',alias:'widget.statusbar',requires:['Ext.toolbar.TextItem'],cls:'x-statusbar',busyIconCls:'x-status-busy',busyText:'Loading...',autoClear:5000,emptyText:'&#160;',activeThreadId:0,initComponent:function(){var right=this.statusAlign==='right';this.callParent(arguments);this.currIconCls=this.iconCls||this.defaultIconCls;this.statusEl=Ext.create('Ext.toolbar.TextItem',{cls:'x-status-text '+(this.currIconCls||''),text:this.text||this.defaultText||''});if(right){this.cls+=' x-status-right';this.add('->');this.add(this.statusEl);}else{this.insert(0,this.statusEl);this.insert(1,'->');}},setStatus:function(o){var me=this;o=o||{};Ext.suspendLayouts();if(Ext.isString(o))o={text:o};if(o.text!==undefined)me.setText(o.text);if(o.iconCls!==undefined)me.setIcon(o.iconCls);if(o.clear){var c=o.clear,wait=me.autoClear,defaults={useDefaults:true,anim:true};if(Ext.isObject(c)){c=Ext.applyIf(c,defaults);if(c.wait)wait=c.wait;}else if(Ext.isNumber(c)){wait=c;c=defaults;}else if(Ext.isBoolean(c))c=defaults;c.threadId=this.activeThreadId;Ext.defer(me.clearStatus,wait,me,[c]);}Ext.resumeLayouts(true);return me;},clearStatus:function(o){o=o||{};var me=this,statusEl=me.statusEl;if(o.threadId&&o.threadId!==me.activeThreadId)return me;var text=o.useDefaults?me.defaultText:me.emptyText,iconCls=o.useDefaults?(me.defaultIconCls?me.defaultIconCls:''):'';if(o.anim)statusEl.el.puff({remove:false,useDisplay:true,callback:function(){statusEl.el.show();me.setStatus({text:text,iconCls:iconCls});}});else me.setStatus({text:text,iconCls:iconCls});return me;},setText:function(text){var me=this;me.activeThreadId++;me.text=text||'';if(me.rendered)me.statusEl.setText(me.text);return me;},getText:function(){return this.text;},setIcon:function(cls){var me=this;me.activeThreadId++;cls=cls||'';if(me.rendered){if(me.currIconCls){me.statusEl.removeCls(me.currIconCls);me.currIconCls=null;}if(cls.length>0){me.statusEl.addCls(cls);me.currIconCls=cls;}}else me.currIconCls=cls;return me;},showBusy:function(o){if(Ext.isString(o))o={text:o};o=Ext.applyIf(o||{},{text:this.busyText,iconCls:this.busyIconCls});return this.setStatus(o);}});Ext.define('Ext.ux.form.ToggleField',{extend:'Ext.form.Field',alias:'widget.togglefield',cls:'x-toggle-field',initComponent:function(){this.callParent(arguments);this.toggle=new Ext.form.Checkbox();this.toggle.on('check',this.onToggleCheck,this);this.input=new Ext.form.TextField({disabled:true});},onRender:function(ct,position){if(!this.el){this.panel=new Ext.Panel({cls:this.groupCls,layout:'table',layoutConfig:{columns:2},border:false,renderTo:ct});this.panel.ownerCt=this;this.el=this.panel.getEl();this.panel.add(this.toggle);this.panel.add(this.input);this.panel.doLayout();this.toggle.getEl().parent().setStyle('padding-right','10px');}this.callParent(arguments);},onResize:function(w,h){this.panel.setSize(w,h);this.panel.doLayout();var inputWidth=w-this.toggle.getSize().width-25;this.input.setSize(inputWidth,h);},onToggleCheck:function(toggle,checked){this.input.setDisabled(!checked);}});Ext.define('Ext.ux.form.SpinnerGroup',{extend:'Ext.form.CheckboxGroup',alias:'widget.spinnergroup',defaultType:'spinnerfield',anchor:'98%',groupCls:'x-form-spinner-group',colCfg:{},onRender:function(ct,position){if(!this.el){var panelCfg={cls:this.groupCls,layout:'column',border:false,renderTo:ct};var colCfg=Ext.apply({defaultType:this.defaultType,layout:'form',border:false,labelWidth:60,defaults:{hideLabel:true,anchor:'60%'}},this.colCfg);if(this.items[0].items){Ext.apply(panelCfg,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var i=0,len=this.items.length;i<len;i++)Ext.applyIf(this.items[i],colCfg);;}else{var numCols,cols=[];if(typeof this.columns=='string')this.columns=this.items.length;if(!Ext.isArray(this.columns)){var cs=[];for(var i=0;i<this.columns;i++)cs.push((100/this.columns)*.01);this.columns=cs;}numCols=this.columns.length;for(var i=0;i<numCols;i++){var cc=Ext.apply({items:[]},colCfg);cc[this.columns[i]<=1?'columnWidth':'width']=this.columns[i];if(this.defaults)cc.defaults=Ext.apply(cc.defaults||{},this.defaults);cols.push(cc);};if(this.vertical){var rows=Math.ceil(this.items.length/numCols),ri=0;for(var i=0,len=this.items.length;i<len;i++){if(i>0&&i%rows==0)ri++;if(this.items[i].fieldLabel)this.items[i].hideLabel=false;cols[ri].items.push(this.items[i]);};}else{for(var i=0,len=this.items.length;i<len;i++){var ci=i%numCols;if(this.items[i].fieldLabel)this.items[i].hideLabel=false;cols[ci].items.push(this.items[i]);};}Ext.apply(panelCfg,{layoutConfig:{columns:numCols},items:cols});}this.panel=new Ext.Panel(panelCfg);this.el=this.panel.getEl();if(this.forId&&this.itemCls){var l=this.el.up(this.itemCls).child('label',true);if(l)l.setAttribute('htmlFor',this.forId);}var fields=this.panel.findBy(function(c){return c.isFormField;},this);this.items=new Ext.util.MixedCollection();this.items.addAll(fields);this.items.each(function(field){field.on('spin',this.onFieldChange,this);field.on('change',this.onFieldChange,this);},this);if(this.lazyValueSet){this.setValue(this.value);delete this.value;delete this.lazyValueSet;}if(this.lazyRawValueSet){this.setRawValue(this.rawValue);delete this.rawValue;delete this.lazyRawValueSet;}}this.callParent(arguments);},onFieldChange:function(spinner){this.fireEvent('change',this,this.getValue());},initValue:Ext.emptyFn,getValue:function(){var value=[this.items.getCount()];this.items.each(function(item,i){value[i]=Number(item.getValue());});return value;},getRawValue:function(){var value=[this.items.getCount()];this.items.each(function(item,i){value[i]=Number(item.getRawValue());});return value;},setValue:function(value){if(!this.rendered){this.value=value;this.lazyValueSet=true;}else this.items.each(function(item,i){item.setValue(value[i]);});},setRawValue:function(value){if(!this.rendered){this.rawValue=value;this.lazyRawValueSet=true;}else this.items.each(function(item,i){item.setRawValue(value[i]);});}});